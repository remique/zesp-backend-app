(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[5662],{33686:(t,e,a)=>{"use strict";a.d(e,{Z:()=>u});var n=a(6610),o=a(5991),i=a(65255),r=a(53724),s=a(77608),l=a(99578),c=a(30507);var u=function(t){(0,i.Z)(u,t);var e,a,l=(e=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(a){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function u(){return(0,n.Z)(this,u),l.apply(this,arguments)}return(0,o.Z)(u,[{key:"baseURL",value:function(){return c.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),u}(l.H)},5035:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,"\n.expandable-image[data-v-0f926b4a] {\n\tposition: relative;\n\tcursor: -webkit-zoom-in;\n\tcursor: zoom-in;\n\t-webkit-transition: 0.25s opacity;\n\t-o-transition: 0.25s opacity;\n\ttransition: 0.25s opacity;\n}\n.close-button[data-v-0f926b4a] {\n\tposition: fixed;\n\ttop: 10px;\n\tright: 10px;\n\tdisplay: none;\n\tcursor: pointer;\n}\n.close-button i[data-v-0f926b4a] {\n\tcolor: white !important;\n}\n.expand-button[data-v-0f926b4a] {\n\tfont-size: 22px;\n\tz-index: 5;\n\tposition: absolute;\n\t-webkit-box-align: center;\n\t-webkit-align-items: center;\n\t    -ms-flex-align: center;\n\t        align-items: center;\n\t-webkit-box-pack: center;\n\t-webkit-justify-content: center;\n\t    -ms-flex-pack: center;\n\t        justify-content: center;\n\tpadding: 0px;\n\tpadding: 3px;\n\tright: 10px;\n\ttop: 10px;\n\topacity: 0;\n\t-webkit-transition: 0.3s opacity;\n\t-o-transition: 0.3s opacity;\n\ttransition: 0.3s opacity;\n}\n.expand-button i[data-v-0f926b4a] {\n\tcolor: white !important;\n}\n.expandable-image:hover .expand-button[data-v-0f926b4a] {\n\topacity: 1;\n}\n.expandable-image img[data-v-0f926b4a] {\n\twidth: 100%;\n}\n",""]);const i=o},72076:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,"\n.v-application:not(.theme--dark) .img-bg .v-image[data-v-105e025b] {\n\tbackground-color: #e0e0e0;\n}\n.v-application.theme--dark .img-bg .v-image[data-v-105e025b] {\n\tbackground-color: #383838;\n}\n.img-actions[data-v-105e025b] {\n\theight: 56px;\n\t-webkit-transform: none;\n\t    -ms-transform: none;\n\t        transform: none;\n}\n.img-actions .v-btn[data-v-105e025b] {\n\twidth: 100%;\n\tmax-width: 100%;\n}\n.img-actions button[data-v-105e025b]:hover {\n\tcolor: red !important;\n}\n.v-bottom-navigation[data-v-105e025b] {\n\tbackground-color: white;\n}\n.v-application.theme--dark .v-bottom-navigation[data-v-105e025b] {\n\tbackground-color: #272727;\n}\n.v-application.theme--dark .v-bottom-navigation i[data-v-105e025b] {\n\tcolor: #171717;\n}\n.active .v-image[data-v-105e025b] {\n\tbackground-color: var(--v-primary-base) !important;\n\t-webkit-box-shadow: 0 3px 7px 2px rgb(62 49 255 / 40%),\n\t\t0 5px 8px 0 rgb(62 49 255 / 34%),\n\t\t0 1px 14px 0 rgb(62 49 255 / 32%) !important;\n\t        box-shadow: 0 3px 7px 2px rgb(62 49 255 / 40%),\n\t\t0 5px 8px 0 rgb(62 49 255 / 34%),\n\t\t0 1px 14px 0 rgb(62 49 255 / 32%) !important;\n\tborder: 1px solid var(--v-primary-lighten1);\n}\n.active .v-btn__content i[data-v-105e025b] {\n\tcolor: white;\n}\n.active .v-bottom-navigation[data-v-105e025b] {\n\tbackground-color: var(--v-primary-base) !important;\n}\n.noData[data-v-105e025b] {\n\tmargin-top: -24px;\n}\n",""]);const i=o},21491:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,"\n.fixIndex[data-v-478cf90e] {\n\tz-index: 9999;\n}\n.v-application:not(.theme--dark) .bg[data-v-478cf90e] {\n\tbackground-color: #f3f3f3 !important;\n}\n.v-application.theme--dark .bg[data-v-478cf90e] {\n\tbackground-color: #121212 !important;\n}\n",""]);const i=o},52762:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=a(23645),o=a.n(n)()((function(t){return t[1]}));o.push([t.id,"\n.img-actions[data-v-4e4eea8d] {\n\theight: 56px;\n\t-webkit-transform: none;\n\t    -ms-transform: none;\n\t        transform: none;\n}\n.img-actions .v-btn[data-v-4e4eea8d] {\n\twidth: 100%;\n\tmax-width: 100%;\n}\n.img-actions button[data-v-4e4eea8d]:hover {\n\tcolor: red !important;\n}\n.v-bottom-navigation[data-v-4e4eea8d] {\n\tbackground-color: white;\n}\n.v-application.theme--dark .v-bottom-navigation[data-v-4e4eea8d] {\n\tbackground-color: #272727;\n}\n.v-application.theme--dark .v-bottom-navigation i[data-v-4e4eea8d] {\n\tcolor: #171717;\n}\n.addButton[data-v-4e4eea8d] {\n\tmargin: 7px;\n\tpadding: 0;\n\tposition: absolute;\n\tright: 2px;\n\ttop: 2px;\n}\n",""]);const i=o},61113:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});const n=(0,a(51900).Z)({name:"ConfirmModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),a("v-spacer")],2)],1)],1)],1)}),[],!1,null,null,null).exports},28154:(t,e,a)=>{"use strict";a.d(e,{Z:()=>g});const n={name:"FCardModal",props:{value:{type:null},closeButton:{type:Boolean,default:!0}},data:function(){return{showModal:!1}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}};var o,i=a(93379),r=a.n(i),s=a(15054),l=a.n(s),c=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=l().locals||{},d.use=function(){return c++||(o=r()(l(),u)),d},d.unuse=function(){c>0&&!--c&&(o(),o=null)};const g=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{staticClass:"fixIndex",attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("v-card",{staticClass:"bg"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[t.closeButton?a("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close}},[a("v-icon",[t._v("fa-close")])],1):t._e(),t._v(" "),a("v-toolbar-title",[t._t("header")],2),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[t.closeButton?a("v-btn",{attrs:{dark:"",text:""},on:{click:t.close}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("buttons.actions.close"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t._t("actions")],2)],1),t._v(" "),a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",sm:"10"}},[a("v-card",{staticClass:"mx-auto mt-6"},[a("v-card-text",[a("h2",{staticClass:"text--primary text-center"},[t._t("card-title")],2),t._v(" "),t._t("card-text")],2),t._v(" "),a("v-card-text",[t._t("body")],2)],1),t._v(" "),t._t("footer")],2)],1)],1)],1)],1)}),[],!1,null,"478cf90e",null).exports},22561:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});const n={name:"UIPagination",props:{length:{type:Number,default:15},totalVisible:{type:Number,default:7},value:{type:null}},data:function(){return{currentPage:1}},watch:{currentPage:function(t){this.$emit("input",t)},value:function(t){this.currentPage=t}},created:function(){this.value&&(this.currentPage=this.value)}},o=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-pagination",{attrs:{length:t.length,"total-visible":t.totalVisible},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)}),[],!1,null,null,null).exports},75662:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>nt});var n=a(92137),o=a(87757),i=a.n(o),r=a(22561);const s={name:"ExpandableImage",props:{closeOnBackgroundClick:{type:Boolean,default:!0}},data:function(){return{expanded:!1,closeButtonRef:null}},methods:{closeImage:function(t){this.expanded=!1,t.stopPropagation()},freezeVp:function(t){t.preventDefault()},onExpandedImageClick:function(t){t.stopPropagation();var e=this.cloned.querySelector("img"),a=this.getRenderedSize(e.width,e.height,e.naturalWidth,e.naturalHeight);(t.clientX<a.left||t.clientX>a.right||t.clientY<a.top||t.clientY>a.bottom)&&(this.expanded=!1)},getRenderedSize:function(t,e,a,n){var o=a>n?a/n:n/a,i=a>=n?o*e:t,r=n>a?o*t:e,s=(this.cloned.clientWidth-i)/2,l=s+i,c=(this.cloned.clientHeight-r)/2;return{left:s,top:c,right:l,bottom:c+r}},getImgSrcFromStyle:function(t){return t&&t.style?t.style.backgroundImage.slice(4,-1).replace(/"/g,""):""},fixImageDiv:function(t){var e=this.getImgSrcFromStyle(t.querySelector(".v-image__image"));t.querySelector(".expandable-image-container").remove();var a=new Image;a.src=e,t.appendChild(a)}},watch:{expanded:function(t){var e=this;this.$nextTick((function(){t?(e.cloned=e.$el.cloneNode(!0),e.fixImageDiv(e.cloned),e.closeButtonRef=e.cloned.querySelector(".close-button"),e.closeButtonRef.addEventListener("click",e.closeImage),document.body.appendChild(e.cloned),document.body.style.overflow="hidden",e.cloned.addEventListener("touchmove",e.freezeVp,!1),e.closeOnBackgroundClick&&e.cloned.addEventListener("click",e.onExpandedImageClick),setTimeout((function(){e.cloned.style.opacity=1}),0)):(e.cloned.style.opacity=0,e.cloned.removeEventListener("touchmove",e.freezeVp,!1),e.closeOnBackgroundClick&&e.cloned.removeEventListener("click",e.onExpandedImageClick),setTimeout((function(){e.closeButtonRef.removeEventListener("click",e.closeImage),e.cloned.remove(),e.cloned=null,e.closeButtonRef=null,document.body.style.overflow="auto"}),250))}))}}};var l,c=a(93379),u=a.n(c),d=a(44742),g=a.n(d),m=0,f={injectType:"lazyStyleTag",insert:"head",singleton:!1},v={};v.locals=g().locals||{},v.use=function(){return m++||(l=u()(g(),f)),v},v.unuse=function(){m>0&&!--m&&(l(),l=null)};var p=a(51900);const h=(0,p.Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expandable-image",class:{expanded:t.expanded},on:{click:function(e){t.expanded=!0}}},[t.expanded?a("i",{staticClass:"close-button"},[a("v-icon",[t._v("fas fa-times")])],1):t._e(),t._v(" "),t.expanded?t._e():a("i",{staticClass:"expand-button"},[a("v-icon",[t._v("fas fa-expand-alt")])],1),t._v(" "),a("v-img",{staticClass:"grey lighten-2 elevation-5 expandable-image-container",attrs:{src:t.$attrs.src,"aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])})],1)}),[],!1,null,"0f926b4a",null).exports;var b=a(80018),x=a(61113),y=a(6610),I=a(5991),_=a(65255),k=a(53724),w=a(77608),D=a(33686);var $=function(t){(0,_.Z)(o,t);var e,a,n=(e=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,w.Z)(e);if(a){var o=(0,w.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,k.Z)(this,t)});function o(){return(0,y.Z)(this,o),n.apply(this,arguments)}return(0,I.Z)(o,[{key:"resource",value:function(){return"image"}}]),o}(D.Z),C=a(30507);const P={name:"ImageSelector",components:{ConfirmModal:x.Z,UIPagination:r.Z},data:function(){return{selectedImage:null,data:[],imagesPage:1,imagesLastPage:0,editedItem:{id:0},editedIndex:-1,dialogDelete:!1,loading:!1}},computed:{imageId:{get:function(){if(this.editedIndex>=0){var t=this.data[this.editedIndex];if(t)return t.id}return""},set:function(t){return t}},noData:function(){return!this.loading&&0==this.data.length}},mounted:function(){var t=this;this.$nextTick((function(){t.fetchImagesData()}))},methods:{fetchImagesData:function(){var t=this;return(0,n.Z)(i().mark((function e(){var a,n,o,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,t.loading=!0,e.prev=2,e.next=5,$.page(a.imagesPage).get();case 5:for(n=e.sent,o=n.data,r=[],s=0;s<o.length;s++)r.push({id:o[s].id,src:a.fixImageUrl(C.API_URL,o[s].url)});r&&(a.data=r),a.imagesLastPage=a.getAllPagesFromLast(n.last_page),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.$toast.error(a.$t("images.list.error"),a.$t("notifications.error"));case 16:return e.prev=16,a.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))()},deleteImageData:function(t){var e=arguments,a=this;return(0,n.Z)(i().mark((function n(){var o,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.length>1&&void 0!==e[1]&&e[1],o=a,n.prev=2,r=new $({id:t}),n.next=6,r.delete();case 6:o.fetchImagesData(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),o.$toast.error(o.$t("images.delete.error"),o.$t("notifications.error"));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},isActive:function(t){return this.selectedImage&&t&&this.selectedImage.id===t.id},isActiveClass:function(t){var e="img-bg";return this.isActive(t)&&(e+=" active"),e},onSelectImage:function(t){this.selectedImage=this._.clone(t),this.$emit("selected",t)},reset:function(){this.onSelectImage(null)},resetData:function(){this.data=[],this.imagesPage=0,this.imagesLastPage=0,this.fetchImagesData()},openDeleteImageDialog:function(t){this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogDelete=!0},deleteImageConfirm:function(){var t=this.data[this.editedIndex];this.deleteImageData(t.id),this.isActive(t)&&this.onSelectImage(null),this.closeImageDeleteDialog()},closeImageDeleteDialog:function(){this.dialogDelete=!1},addImages:function(t){var e,a=[];for(var n in t)t.hasOwnProperty(n)&&(e=t[n],a.push({id:e.id,src:self.fixImageUrl(C.API_URL,e.url)}));this.data=(0,b.Z)(new Set([].concat(a,(0,b.Z)(this.data))))}},watch:{imagesPage:function(t){this.fetchImagesData()}}};var Z,A=a(62858),S=a.n(A),M=0,R={injectType:"lazyStyleTag",insert:"head",singleton:!1},U={};U.locals=S().locals||{},U.use=function(){return M++||(Z=u()(S(),R)),U},U.unuse=function(){M>0&&!--M&&(Z(),Z=null)};const E=(0,p.Z)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-row",[t.noData?t._e():t._l(t.data,(function(e){return a("v-col",{key:"image-selector-image-"+e.id,staticClass:"d-flex child-flex",class:t.isActiveClass(e),attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("div",[a("div",{staticClass:"text-center"},[a("v-img",{staticClass:"elevation-5",attrs:{src:e.src,"lazy-src":e.src,"aspect-ratio":"1"},on:{click:function(a){return t.onSelectImage(e)}},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})],1),t._v(" "),a("div",{staticClass:"v-bottom-navigation v-item-group red--text img-actions"},[a("v-btn",{on:{click:function(a){return t.openDeleteImageDialog(e)}}},[a("v-icon",[t._v("fas fa-trash")])],1)],1)])])}))],2)],1),t._v(" "),a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.noData,expression:"noData"}],staticClass:"noData text-center",attrs:{color:"blue",dark:"",icon:"fa-info-circle",transition:"scale-transition"}},[t._v("\n\t\t"+t._s(t.$t("data.noData"))+"\n\t")]),t._v(" "),a("UIPagination",{staticClass:"mt-4",attrs:{length:t.imagesLastPage},model:{value:t.imagesPage,callback:function(e){t.imagesPage=e},expression:"imagesPage"}}),t._v(" "),a("ConfirmModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("images.delete.question"))+" "+t._s(t.imageId)+"?")]},proxy:!0},{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteImageConfirm}},[t._v(t._s(t.$t("buttons.actions.accept")))])]},proxy:!0}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}})],1)}),[],!1,null,"105e025b",null).exports;var L=a(61658),B=a.n(L),T=(a(80772),a(10088),a(90521)),z=a.n(T),F=a(18236),j=a.n(F),O=a(72965),q=a.n(O),N=a(9669),V=a.n(N);const H={name:"UploadImage",components:{FilePond:B()(z(),j(),q())},data:function(){var t=this;return{myFiles:[],files:{},counter:0,server:{process:function(e,a,n,o,i,r,s,l,c){t.counter++;var u=new FormData;u.append("file",a,a.name);var d=V().CancelToken.source();return t.$http({method:"POST",url:C.API_URL+"/image",data:u,cancelToken:d.token,onUploadProgress:function(t){r(t.lengthComputable,t.loaded,t.total)}}).then((function(e){t.files[e.data.id]=e.data,o(e.data.id)})).catch((function(t){V().isCancel(t)||i(t.message)})),{abort:function(){d.cancel("Operation canceled by the user."),s()}}},revert:function(e,a,n){t.$http({method:"DELETE",url:C.API_URL+"/image/"+e}).then((function(n){delete t.files[e],a()})).catch((function(t){n(t.message)}))}}}},methods:{reset:function(){var t=this.$refs.pond,e=t.getFiles();if(0!=e.length)for(var a=0;a<=e.length-1;a++)1==e[a].status?e[a].abortLoad():3==e[a].status&&e[a].abortProcessing(),t.removeFile(e[a].id);this.files={}},getImages:function(){return this.$refs.pond.getFiles()},getData:function(){return this.files}}},G=(0,p.Z)(H,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("file-pond",{ref:"pond",attrs:{name:"file","label-idle":t.$t("fileUpload.dropFiles"),"allow-multiple":!0,"accepted-file-types":"image/jpg, image/jpeg, image/png",server:t.server,files:t.myFiles,maxFileSize:"10MB"}})],1)}),[],!1,null,null,null).exports;var W=a(28154);var X=function(t){(0,_.Z)(o,t);var e,a,n=(e=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,w.Z)(e);if(a){var o=(0,w.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,k.Z)(this,t)});function o(){return(0,y.Z)(this,o),n.apply(this,arguments)}return(0,I.Z)(o,[{key:"resource",value:function(){return"albumimage"}},{key:"delete",value:function(){if(this._customResource)throw Error("The delete() method cannot be used in conjunction with the custom() method. Use for() instead.");if(!this.hasId())throw new Error("This model has a empty ID.");var t=Object.assign({},this);return delete t.id,this.request(this._reqConfig({method:"DELETE",url:this.endpoint(),data:t})).then((function(t){return t}))}}]),o}(D.Z);const Y={ititle:"gallery.images.list.title",components:{UIPagination:r.Z,ExpandableImage:h,ImageSelector:E,UploadImage:G,ConfirmModal:x.Z,FCardModal:W.Z},data:function(){return{dialogAdd:!1,dialogDelete:!1,uploadImageDialog:!1,data:[],selectedImage:null,editedIndex:-1,albumId:-1,albumImagesPage:1,albumImagesLastPage:0,loading:!1}},computed:{noData:function(){return!this.loading&&0==this.data.length}},mounted:function(){var t=this;this.$nextTick((function(){t.albumId=parseInt(t.$route.params.albumId),t.albumImagesPage=parseInt(t.$route.params.pageId),t.fetchAlbumImagesData()}))},methods:{fetchAlbumImagesData:function(){var t=arguments,e=this;return(0,n.Z)(i().mark((function a(){var n,o,r,s,l,c;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:null,o=e,e.loading=!0,a.prev=3,a.next=6,X.custom("/albumimage/"+o.albumId).page(o.albumImagesPage).get();case 6:for(r=a.sent,s=r.data,l=[],c=0;c<s.length;c++)l.push({id:s[c].id,src:o.fixImageUrl(C.API_URL,s[c].url)});l&&(o.data=l),o.albumImagesLastPage=o.getAllPagesFromLast(r.last_page),n&&n(),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(3),o.$toast.error(o.$t("gallery.images.list.error"),o.$t("notifications.error"));case 18:return a.prev=18,o.loading=!1,a.finish(18);case 21:case"end":return a.stop()}}),a,null,[[3,15,18,21]])})))()},saveAlbumImageData:function(t){var e=arguments,a=this;return(0,n.Z)(i().mark((function n(){var o,r,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.length>1&&void 0!==e[1]?e[1]:null,r=a,n.prev=2,s=new X(t),n.next=6,s.save();case 6:n.sent,r.$toast.success(r.$t("images.add.success"),r.$t("notifications.success")),r.fetchAlbumImagesData(o),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),r.$toast.error(r.$t("gallery.images.assign.error"),r.$t("notifications.error"));case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},deleteAlbumImageData:function(t){var e=arguments,a=this;return(0,n.Z)(i().mark((function n(){var o,r,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.length>1&&void 0!==e[1]?e[1]:null,r=a,n.prev=2,(s=new X({id:t,album_id:r.albumId})).album_id=r.albumId,n.next=7,s.delete();case 7:r.$toast.success(r.$t("images.delete.success"),r.$t("notifications.success")),r.fetchAlbumImagesData(o),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0),r.$toast.error(r.$t("images.delete.error"),r.$t("notifications.error"));case 15:case"end":return n.stop()}}),n,null,[[2,11]])})))()},openAddAlbumImageDialog:function(){this.dialogAdd=!0,this.$refs.imageSelector&&(this.$refs.imageSelector.reset(),this.$refs.imageSelector.fetchImagesData())},addAlbumImageConfirm:function(){var t=this;this.saveAlbumImageData({image_id:this.selectedImage.id,album_id:this.albumId},(function(){t.closeAlbumImageAddDialog()}))},closeAlbumImageAddDialog:function(){this.dialogAdd=!1},openDeleteAlbumImageDialog:function(t){this.editedIndex=this.data.indexOf(t),this.dialogDelete=!0},deleteAlbumImageConfirm:function(){var t=this.data[this.editedIndex];this.deleteAlbumImageData(t.id),this.closeDeleteAlbumImageDialog()},closeDeleteAlbumImageDialog:function(){this.dialogDelete=!1},openUploadImageDialog:function(){this.uploadImageDialog=!0},closeUploadImageDialog:function(){this.uploadImageDialog=!1},onCloseImageUploadDialog:function(){var t=this.$refs.UploadImage.getData();this.$refs.UploadImage.reset(),Object.keys(t).length>0&&this.$refs.imageSelector.resetData()},updateSelectedImage:function(t){this.selectedImage=t}},watch:{albumImagesPage:function(t){this.fetchAlbumImagesData()}}};var J,K=a(99447),Q=a.n(K),tt=0,et={injectType:"lazyStyleTag",insert:"head",singleton:!1},at={};at.locals=Q().locals||{},at.use=function(){return tt++||(J=u()(Q(),et)),at},at.unuse=function(){tt>0&&!--tt&&(J(),J=null)};const nt=(0,p.Z)(Y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageBar",[t.$can("save","Gallery")?a("v-btn",{staticClass:"primary",attrs:{elevation:"1",large:"",rounded:"",loading:t.loading},on:{click:t.openAddAlbumImageDialog}},[a("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("fas fa-plus")]),t._v("\n\t\t\t"+t._s(t.$t("gallery.images.assign.image"))+"\n\t\t")],1):t._e()],1),t._v(" "),a("v-container",{attrs:{fluid:""}},[a("v-row",[t.noData?t._e():t._l(t.data,(function(e,n){return a("v-col",{key:"album-image-"+e.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("div",[a("div",{staticClass:"text-center"},[a("ExpandableImage",{attrs:{src:e.src}})],1),t._v(" "),t.$can("delete","Gallery")?a("div",{staticClass:"v-bottom-navigation v-item-group red--text img-actions"},[a("v-btn",{attrs:{disabled:t.loading},on:{click:function(a){return t.openDeleteAlbumImageDialog(e)}}},[a("v-icon",[t._v("fas fa-trash")])],1)],1):t._e()])])})),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.noData,expression:"noData"}],attrs:{color:"blue",dark:"",border:"left",icon:"fa-info-circle",transition:"scale-transition"}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("data.noData"))+"\n\t\t\t\t")])],1)],2)],1),t._v(" "),a("UIPagination",{staticClass:"mt-4",attrs:{length:t.albumImagesLastPage},model:{value:t.albumImagesPage,callback:function(e){t.albumImagesPage=e},expression:"albumImagesPage"}}),t._v(" "),a("FCardModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("gallery.images.assign.image2")))]},proxy:!0},{key:"card-title",fn:function(){return[t._v(t._s(t.$t("images.list.title")))]},proxy:!0},{key:"card-text",fn:function(){return[a("v-btn",{staticClass:"addButton",attrs:{title:"",color:"red",elevation:"2"},on:{click:t.openUploadImageDialog}},[a("v-icon",{attrs:{color:"white"}},[t._v("fa-plus")])],1)]},proxy:!0},{key:"actions",fn:function(){return[t.selectedImage?a("v-btn",{attrs:{dark:"",text:""},on:{click:t.addAlbumImageConfirm}},[t._v("\n\t\t\t\t"+t._s(t.$t("buttons.actions.add"))+"\n\t\t\t")]):t._e()]},proxy:!0},{key:"body",fn:function(){return[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:!t.selectedImage,expression:"!selectedImage"}],staticClass:"text-center",attrs:{type:"info"}},[t._v("\n\t\t\t\t"+t._s(t.$t("gallery.images.assign.selectImage"))+"\n\t\t\t")]),t._v(" "),a("ImageSelector",{ref:"imageSelector",on:{selected:t.updateSelectedImage}})]},proxy:!0}]),model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}}),t._v(" "),a("FCardModal",{on:{onclose:t.onCloseImageUploadDialog},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("gallery.images.upload.title")))]},proxy:!0},{key:"card-title",fn:function(){return[t._v(t._s(t.$t("gallery.images.upload.title")))]},proxy:!0},{key:"body",fn:function(){return[a("UploadImage",{ref:"UploadImage"})]},proxy:!0}]),model:{value:t.uploadImageDialog,callback:function(e){t.uploadImageDialog=e},expression:"uploadImageDialog"}}),t._v(" "),a("ConfirmModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("images.delete.question"))+" "+t._s(t.editedIndex)+"?")]},proxy:!0},{key:"actions",fn:function(){return[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteAlbumImageConfirm}},[t._v(t._s(t.$t("buttons.actions.accept")))])]},proxy:!0}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}})],1)}),[],!1,null,"4e4eea8d",null).exports},44742:(t,e,a)=>{var n=a(5035);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,a(45346).Z)("4c749fb4",n,!0,{})},62858:(t,e,a)=>{var n=a(72076);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,a(45346).Z)("1f787d68",n,!0,{})},15054:(t,e,a)=>{var n=a(21491);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,a(45346).Z)("c764a8c4",n,!0,{})},99447:(t,e,a)=>{var n=a(52762);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),(0,a(45346).Z)("4097bfb0",n,!0,{})}}]);