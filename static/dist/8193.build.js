(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[8193],{3686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(6610),a=n(5991),s=n(5255),r=n(3724),o=n(7608),l=n(9578),c=n(507);var u=function(t){(0,s.Z)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,o.Z)(e);if(n){var a=(0,o.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,r.Z)(this,t)});function u(){return(0,i.Z)(this,u),l.apply(this,arguments)}return(0,a.Z)(u,[{key:"baseURL",value:function(){return c.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),u}(l.H)},3013:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(3645),a=n.n(i)()((function(t){return t[1]}));a.push([t.id,"\n.priority[data-v-15f3e15e] {\n\t-webkit-box-shadow: 0 3px 1px -2px rgba(0,0,0,.2),\n\t\t0 2px 2px 0 rgba(0,0,0,.14),\n\t\t0 1px 5px 0 rgba(0,0,0,.12) !important;\n\t        box-shadow: 0 3px 1px -2px rgba(0,0,0,.2),\n\t\t0 2px 2px 0 rgba(0,0,0,.14),\n\t\t0 1px 5px 0 rgba(0,0,0,.12) !important;\n\tborder: 2px solid #C62828;\n}\n.primary-icon[data-v-15f3e15e] {\n\tcolor: orange;\n}\n",""]);const s=a},742:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(3645),a=n.n(i)()((function(t){return t[1]}));a.push([t.id,"\n.addTitle {\n\twidth: -webkit-max-content;\n\twidth: -moz-max-content;\n\twidth: max-content;\n\tmargin-bottom: 5px;\n\tpadding: 10px;\n\ttext-align: center;\n}\n.detailNews {\n\tmargin: 10px;\n\tpadding: 10px;\n}\n.dialogArea {\n\tpadding: 15px;\n}\n.isPriority {\n\tmargin-top: 10px;\n}\n.priorityChecker {\n\tpadding: 5px 10px 5px 10px;\n}\n",""]);const s=a},4726:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const i={name:"UiInputTextValidation",props:{rules:{type:String,default:""},value:{type:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1!==["url","text","password","email","search"].indexOf(t)}}},data:function(){return{inputValue:""}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""},vPName:function(){return this.$attrs.vPName?this.$attrs.vPName:this.lowerCaseLabel}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}},a=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{name:t.vPName,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("v-text-field",{attrs:{label:t.$attrs.label,"error-messages":i,disabled:t.disabled,type:t.type},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})]}}])})}),[],!1,null,null,null).exports},1113:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=(0,n(1900).Z)({name:"ConfirmModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),n("v-spacer")],2)],1)],1)],1)}),[],!1,null,null,null).exports},2561:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const i={name:"UIPagination",props:{length:{type:Number,default:15},totalVisible:{type:Number,default:7},value:{type:null}},data:function(){return{currentPage:1}},watch:{currentPage:function(t){this.$emit("input",t)},value:function(t){this.currentPage=t}},created:function(){this.value&&(this.currentPage=this.value)}},a=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.length,"total-visible":t.totalVisible},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)}),[],!1,null,null,null).exports},126:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>V});var i=n(2137),a=n(7757),s=n.n(a),r=n(4726),o=n(2561),l=n(1113),c=n(4161);const u={name:"Feed",props:{item:{type:Object,default:null},title:{type:String,default:null},message:{type:String,default:null},priority:{type:Boolean,default:null},firstname:{type:String,default:null},surname:{type:String,default:null},currentUser:{type:Boolean,default:null},updatedAt:{type:String,default:null}},components:{UserAvatar:c.Z},methods:{edit:function(){this.$emit("edit",this.item)},remove:function(){this.$emit("remove",this.item)}},computed:{cardC:function(){return this.priority,"card-feed"}}};var d,v=n(3379),p=n.n(v),f=n(4912),m=n.n(f),h=0,g={injectType:"lazyStyleTag",insert:"head",singleton:!1},y={};y.locals=m().locals||{},y.use=function(){return h++||(d=p()(m(),g)),y},y.unuse=function(){h>0&&!--h&&(d(),d=null)};var _=n(1900);const x=(0,_.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{class:t.cardC,attrs:{outlined:""}},[n("div",[n("v-list-item",[n("v-list-item-avatar",[n("UserAvatar",{attrs:{firstname:t.firstname,surname:t.surname,size:"48"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"questrial subtitle"},[n("span",[t._v(t._s(t.title))])])],1),t._v(" "),n("v-list-item-action",[n("div",{staticClass:"text-center"},[t.priority?n("v-icon",{staticClass:"primary-icon"},[t._v("fa-exclamation-circle")]):t._e(),t._v(" "),t.$can("save","Announcements")&&t.currentUser?n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-icon",t._g(t._b({staticClass:"ml-3"},"v-icon",a,!1),i),[t._v("fa-ellipsis-h")])]}}],null,!1,1423260982)},[t._v(" "),n("v-list",[n("v-list-item",[n("v-btn",{attrs:{plain:""},on:{click:t.edit}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\tfas fa-edit\n\t\t\t\t\t\t\t\t\t")]),t._v("\n\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("buttons.actions.edit"))+"\n\t\t\t\t\t\t\t\t")],1)],1),t._v(" "),n("v-list-item",[n("v-btn",{attrs:{plain:""},on:{click:t.remove}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\tfas fa-trash\n\t\t\t\t\t\t\t\t\t")]),t._v("\n\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("buttons.actions.remove"))+"\n\t\t\t\t\t\t\t\t")],1)],1)],1)],1):t._e()],1)])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("div",{staticClass:"questrial body1 mb-4",domProps:{innerHTML:t._s(t.message)}})])],1)}),[],!1,null,"15f3e15e",null).exports;var w=n(6610),b=n(5991),$=n(5255),k=n(3724),I=n(7608);var C=function(t){(0,$.Z)(a,t);var e,n,i=(e=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,I.Z)(e);if(n){var a=(0,I.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,k.Z)(this,t)});function a(){return(0,w.Z)(this,a),i.apply(this,arguments)}return(0,b.Z)(a,[{key:"resource",value:function(){return"news"}}]),a}(n(3686).Z);const N={components:{UiInputTextValidation:r.Z,UIPagination:o.Z,ConfirmModal:l.Z,Feed:x},data:function(){return{newsId:null,dialogAdd:!1,dialogEdit:!1,dialogDelete:!1,editedIndex:-1,newItem:{id:0,title:"",details:"",priority:!1},editedItem:{id:0,title:"",details:"",priority:!1},defaultItem:{id:0,title:"",details:"",priority:!1},onlyPriority:0,loading:!1,allPages:0,pageId:1,data:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.pageId=parseInt(t.$route.params.pageId),t.fetchNews()}))},watch:{onlyPriority:function(t){this.fetchNews()},pageId:function(t){this.fetchNews()}},methods:{fetchNews:function(){var t=arguments,e=this;return(0,i.Z)(s().mark((function n(){var i,a,r,o,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:null,a=e,e.loading=!0,n.prev=3,i&&i(),n.next=7,C.params({priority:!!a.onlyPriority}).page(a.pageId).get();case 7:for(r=n.sent,o=r.data,a.allPages=a.getAllPagesFromLast(r.last_page),a.$store.getters["auth/currentUser"],l=0;l<o.length;l++)o[l].updated_at=a.formatDate(o[l].updated_at),o[l].currentUser=!0,o[l].firstname="Harry",o[l].surname="Iras";o&&(a.data=o),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),a.$toast.error(a.$t("announcements.list.error"),a.$t("notifications.error"));case 18:return n.prev=18,a.loading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,15,18,21]])})))()},saveNewsData:function(t){var e=arguments,n=this;return(0,i.Z)(s().mark((function i(){var a,r,o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:null,r=n,n.loading=!0,i.prev=3,o=new C(t),i.next=7,o.save();case 7:r.$toast.success(r.$t("announcements.add.success"),r.$t("notifications.success")),r.fetchNews(a),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),r.$toast.error(r.$t("announcements.add.error"),r.$t("notifications.error"));case 14:return i.prev=14,r.loading=!1,i.finish(14);case 17:case"end":return i.stop()}}),i,null,[[3,11,14,17]])})))()},editNewsData:function(t){var e=arguments,n=this;return(0,i.Z)(s().mark((function i(){var a,r;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:null,r=n,n.loading=!0,i.prev=3,i.next=6,C.custom("news/".concat(t.id)).config({method:"PUT",data:t}).get();case 6:i.sent,r.$toast.success(r.$t("announcements.edit.success"),r.$t("notifications.success")),r.fetchNews(a),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),r.$toast.error(r.$t("announcements.edit.error"),r.$t("notifications.error"));case 14:return i.prev=14,r.loading=!1,i.finish(14);case 17:case"end":return i.stop()}}),i,null,[[3,11,14,17]])})))()},deleteNewsData:function(t){var e=arguments,n=this;return(0,i.Z)(s().mark((function i(){var a,r,o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:null,r=n,n.loading=!0,i.prev=3,o=new C({id:t}),i.next=7,o.delete();case 7:r.$toast.success(r.$t("announcements.delete.success"),r.$t("notifications.success")),r.fetchNews(a),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),r.$toast.error(r.$t("announcements.delete.error"),r.$t("notifications.error"));case 14:return i.prev=14,r.loading=!1,i.finish(14);case 17:case"end":return i.stop()}}),i,null,[[3,11,14,17]])})))()},openAddNewsDialog:function(){this.dialogAdd=!0,this.newItem=this._.cloneDeep(this.defaultItem),this.$refs["nus-observer"].reset()},addNewsConfirm:function(){var t=this;this.saveNewsData({title:this.newItem.title,details:this.newItem.details,priority:this.newItem.priority},(function(){t.closeNewsAddDialog()}))},closeNewsAddDialog:function(){this.dialogAdd=!1},openEditNewsDialog:function(t){console.log(t),this.editedItem=this._.cloneDeep(this.defaultItem),this.$refs["eus-observer"].reset(),this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogEdit=!0},editNewsConfirm:function(){this.editNewsData({id:this.editedItem.id,title:this.editedItem.title,details:this.editedItem.details,priority:this.editedItem.priority},(function(){})),this.closeNewsEditDialog()},closeNewsEditDialog:function(){this.dialogEdit=!1},openDeleteNewsDialog:function(t){console.log(t),this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogDelete=!0},deleteNewsConfirm:function(){var t=this.data[this.editedIndex];this.deleteNewsData(t.id),this.closeNewsDeleteDialog()},closeNewsDeleteDialog:function(){this.dialogDelete=!1}}};var P,D=n(8538),Z=n.n(D),A=0,U={injectType:"lazyStyleTag",insert:"head",singleton:!1},S={};S.locals=Z().locals||{},S.use=function(){return A++||(P=p()(Z(),U)),S},S.unuse=function(){A>0&&!--A&&(P(),P=null)};const V=(0,_.Z)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PageBar",[t.$can("save","Announcements")?n("v-btn",{staticClass:"primary",attrs:{elevation:"1",large:"",rounded:"",loading:t.loading},on:{click:t.openAddNewsDialog}},[n("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("fas fa-plus")]),t._v("\n\t\t\t"+t._s(t.$t("announcements.add.title"))+"\n\t\t")],1):t._e()],1),t._v(" "),n("v-container",{attrs:{fluid:"",tag:"section"}},[n("v-row",{staticClass:"fill-height"},[n("v-col",{attrs:{dark:""}},[n("v-toolbar",[n("v-btn-toggle",{attrs:{tile:"",color:"primary",group:""},model:{value:t.onlyPriority,callback:function(e){t.onlyPriority=e},expression:"onlyPriority"}},[n("v-btn",{attrs:{loading:t.loading}},[t._v(t._s(t.$t("announcements.sort.all")))]),t._v(" "),n("v-btn",{attrs:{loading:t.loading}},[t._v(t._s(t.$t("announcements.sort.priority")))])],1),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-row",{staticClass:"mt-4"},t._l(t.data,(function(e){return n("v-col",{key:e.id,attrs:{cols:"12"}},[n("Feed",{attrs:{item:e,title:e.title,message:e.details,firstname:e.firstname,surname:e.surname,currentUser:!0,priority:e.priority,updatedAt:e.updated_at},on:{edit:t.openEditNewsDialog,remove:t.openDeleteNewsDialog}})],1)})),1),t._v(" "),n("UIPagination",{staticClass:"mt-4",attrs:{length:t.allPages},model:{value:t.pageId,callback:function(e){t.pageId=e},expression:"pageId"}})],1)],1)],1),t._v(" "),n("ValidationObserver",{ref:"nus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return e.reset,[n("v-dialog",{attrs:{width:"50%",height:"40%"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[n("v-card",{staticClass:"dialogArea"},[n("v-sheet",{staticClass:"addTitle white--text",attrs:{color:"primary",shaped:"",elevation:"3"}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("announcements.add.title"))+"\n\t\t\t\t")]),t._v(" "),n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:45",label:t.$t("forms.fields.announcements.title")},model:{value:t.newItem.title,callback:function(e){t.$set(t.newItem,"title",e)},expression:"newItem.title"}}),t._v(" "),n("ckeditor",{model:{value:t.newItem.details,callback:function(e){t.$set(t.newItem,"details",e)},expression:"newItem.details"}}),t._v(" "),n("v-container",{staticClass:"isPriority"},[n("v-row",[n("v-sheet",{staticClass:"priorityChecker",attrs:{elevation:"3"}},[n("v-checkbox",{attrs:{label:t.$t("announcements.general.isPriority")},model:{value:t.newItem.priority,callback:function(e){t.$set(t.newItem,"priority",e)},expression:"newItem.priority"}})],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){return i(t.addNewsConfirm)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("buttons.actions.add"))+"\n\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1)]}}])}),t._v(" "),n("ValidationObserver",{ref:"eus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return e.reset,[n("v-dialog",{attrs:{width:"50%",height:"40%"},model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[n("v-card",{staticClass:"dialogArea"},[n("v-sheet",{staticClass:"addTitle white--text",attrs:{color:"primary",shaped:"",elevation:"3"}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("announcements.edit.title"))+"\n\t\t\t\t")]),t._v(" "),n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:45",label:t.$t("forms.fields.announcements.title")},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,"title",e)},expression:"editedItem.title"}}),t._v(" "),n("ckeditor",{model:{value:t.editedItem.details,callback:function(e){t.$set(t.editedItem,"details",e)},expression:"editedItem.details"}}),t._v(" "),n("v-container",{staticClass:"isPriority"},[n("v-row",[n("v-sheet",{staticClass:"priorityChecker",attrs:{elevation:"3"}},[n("v-checkbox",{attrs:{label:t.$t("announcements.general.isPriority")},model:{value:t.editedItem.priority,callback:function(e){t.$set(t.editedItem,"priority",e)},expression:"editedItem.priority"}})],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){return i(t.editNewsConfirm)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("buttons.actions.save"))+"\n\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1)]}}])}),t._v(" "),n("ConfirmModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("announcements.delete.question"))+" "+t._s(t.editedItem.id)+"?")]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteNewsConfirm}},[t._v(t._s(t.$t("buttons.actions.accept")))])]},proxy:!0}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}})],1)}),[],!1,null,null,null).exports},4912:(t,e,n)=>{var i=n(3013);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,n(5346).Z)("1c347cb7",i,!0,{})},8538:(t,e,n)=>{var i=n(742);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,n(5346).Z)("34471866",i,!0,{})}}]);