(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[4444],{3686:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(6610),r=n(5991),s=n(5255),i=n(3724),o=n(7608),c=n(9578),l=n(507);var u=function(e){(0,s.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var r=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function u(){return(0,a.Z)(this,u),c.apply(this,arguments)}return(0,r.Z)(u,[{key:"baseURL",value:function(){return l.API_URL}},{key:"request",value:function(e){return this.$http.request(e)}}]),u}(c.H)},5944:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"\n.arrowButton[data-v-9534a070] {\n    margin-left: 5px;\n    margin-right: 5px;\n}\n.txtarea[data-v-9534a070] {\n    padding: 15px;\n}\n.area-title[data-v-9534a070] {\n    padding-top: 10px;\n    padding-bottom: 10px;\n    padding-left: 10px;\n    margin-bottom: 10px;\n    width: 50%;\n}\n",""]);const s=r},4444:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var a=n(2137),r=n(7757),s=n.n(r),i=n(6610),o=n(5991),c=n(5255),l=n(3724),u=n(7608),d=n(3686);var v=function(e){(0,c.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,l.Z)(this,e)});function r(){return(0,i.Z)(this,r),a.apply(this,arguments)}return(0,o.Z)(r,[{key:"resource",value:function(){return"dish"}}]),r}(d.Z);var h=function(e){(0,c.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,l.Z)(this,e)});function r(){return(0,i.Z)(this,r),a.apply(this,arguments)}return(0,o.Z)(r,[{key:"resource",value:function(){return"dishmenu"}}]),r}(d.Z);const f={data:function(){return{dishData:[],menuData:[],dialog:null,dialog2:null,dialog3:null,picker:null,focus:"",area:"",field:"",combo:"",combo2:"",brk:"",din:"",lch:"",selectedEvent:{},selectedElement:null,selectedOpen:!1,items:["Śniadanie","Obiad","Podwieczorek"],events:[],breakfests:[],dinners:[],lunches:[]}},mounted:function(){var e=this;this.$nextTick((function(){e.start_up()}))},methods:{start_up:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,n.fetchDishes();case 3:return t.next=5,n.fetchMenu();case 5:return t.next=7,n.group_up();case 7:return t.next=9,n.to_events();case 9:e.$refs.calendar.checkChange();case 10:case"end":return t.stop()}}),t)})))()},fetchDishes:function(){var e=arguments,t=this;return(0,a.Z)(s().mark((function n(){var a,r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:null,r=t,n.prev=2,n.next=5,v.get();case 5:i=n.sent,r.dishData=i,a&&a(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r.$toast.error(r.$t("menu.dish.error.get"),r.$t("notifications.error"));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},fetchMenu:function(){var e=arguments,t=this;return(0,a.Z)(s().mark((function n(){var a,r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:null,r=t,n.prev=2,n.next=5,h.get();case 5:i=n.sent,r.menuData=i,a&&a(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r.$toast.error(r.$t("menu.dishmenu.get.error"),r.$t("notifications.error"));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},group_up:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e;e.breakfests.length>0;)e.breakfests.pop();for(;e.dinners.length>0;)e.dinners.pop();for(;e.lunches.length>0;)e.lunches.pop();for(a=0;a<n.dishData.length;a++)"Breakfest"==n.dishData[a].type&&e.breakfests.push(n.dishData[a].name),"Dinner"==n.dishData[a].type&&e.dinners.push(n.dishData[a].name),"Lunch"==n.dishData[a].type&&e.lunches.push(n.dishData[a].name);case 5:case"end":return t.stop()}}),t)})))()},to_events:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n,a,r,i,o,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(;e.events.length>0;)e.events.pop();for(n="",a="",r=0,i=e,o=0;o<i.menuData.length;o++){for(c=0;c<i.dishData.length;c++)i.dishData[c].id==i.menuData[o].dish_id&&(r=c);"Breakfest"==i.dishData[r].type&&(n=i.menuData[o].date+" 8:00",a=i.menuData[o].date+" 9:00"),"Dinner"==i.dishData[r].type&&(n=i.menuData[o].date+" 12:00",a=i.menuData[o].date+" 13:00"),"Lunch"==i.dishData[r].type&&(n=i.menuData[o].date+" 14:00",a=i.menuData[o].date+" 15:00"),e.events.push({name:i.dishData[r].name,details:i.dishData[r].description,start:n,end:a})}case 6:case"end":return t.stop()}}),t)})))()},deleteDishData:function(e){var t=arguments,n=this;return(0,a.Z)(s().mark((function a(){var r,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]&&t[1],r=n,a.prev=2,i=new v({id:e}),a.next=6,i.delete();case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),r.$toast.error(r.$t("menu.dish.error.delete"),r.$t("notifications.error"));case 11:r.start_up();case 12:case"end":return a.stop()}}),a,null,[[2,8]])})))()},deleteMenuData:function(e){var t=arguments,n=this;return(0,a.Z)(s().mark((function a(){var r,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]&&t[1],r=n,a.prev=2,i=new h({id:e}),a.next=6,i.delete();case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),r.$toast.error(r.$t("menu.dishmenu.delete.error"),r.$t("notifications.error"));case 11:r.start_up();case 12:case"end":return a.stop()}}),a,null,[[2,8]])})))()},deleteMenuData_dish:function(e){var t=arguments,n=this;return(0,a.Z)(s().mark((function a(){var r,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]&&t[1],r=n,a.prev=2,i=new h({dish_id:e}),a.next=6,i.delete();case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),r.$toast.error(r.$t("menu.dishmenu.delete.error"),r.$t("notifications.error"));case 11:r.start_up();case 12:case"end":return a.stop()}}),a,null,[[2,8]])})))()},delete_dish:function(e){for(var t,n=this,a=0,r=0;r<n.dishData.length;r++)n.dishData[r].name==e&&(t=n.dishData[r].id);n.deleteDishData(t);for(var s=0;s<n.menuData.length;s++)if(n.menuData[s].dish_id==e){a=1;break}1==a&&n.deleteMenuData_dish(t),this.dialog2=!1,this.combo2=""},saveMenuData:function(e){var t=arguments,n=this;return(0,a.Z)(s().mark((function a(){var r,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]&&t[1],r=n,a.prev=2,i=new h(e),a.next=6,i.save();case 6:a.sent,a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),r.$toast.error(r.$t("menu.dishmenu.save.error"),r.$t("notifications.error"));case 12:return a.next=14,r.start_up();case 14:case"end":return a.stop()}}),a,null,[[2,9]])})))()},saveDishData:function(e){var t=arguments,n=this;return(0,a.Z)(s().mark((function a(){var r,i;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]&&t[1],r=n,a.prev=2,i=new v(e),a.next=6,i.save();case 6:a.sent,a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),r.$toast.error(r.$t("menu.dish.error.save"),r.$t("notifications.error"));case 12:return a.next=14,r.start_up();case 14:case"end":return a.stop()}}),a,null,[[2,9]])})))()},edit_menu:function(e,t,n,a){for(var r,s,i=this,o=0,c=0,l=0,u=0;u<i.dishData.length;u++)i.dishData[u].name==e&&(o=i.dishData[u].id),i.dishData[u].name==t&&(c=i.dishData[u].id),i.dishData[u].name==n&&(l=i.dishData[u].id);for(var d=0;d<i.menuData.length;d++)i.menuData[d].date==a&&(s=i.menuData[d].id,i.deleteMenuData(s));0!=o&&(r={date:a,institution_id:1,dish_id:o},this.saveMenuData(r)),0!=c&&(r={date:a,institution_id:1,dish_id:c},this.saveMenuData(r)),0!=l&&(r={date:a,institution_id:1,dish_id:l},this.saveMenuData(r)),this.dialog3=!1},add_dish:function(e,t,n){var a="";"Śniadanie"==e&&(a="Breakfest"),"Obiad"==e&&(a="Dinner"),"Podwieczorek"==e&&(a="Lunch"),this.saveDishData({name:n,description:t,type:a,institution_id:1,is_alternative:0}),this.dialog=!1,this.combo="",this.area="",this.field=""},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=e.nativeEvent,n=e.event;this.selectedOpen?this.selectedOpen=!1:(this.selectedEvent=n,this.selectedElement=t.target)}}};var p,m=n(3379),_=n.n(m),k=n(9070),b=n.n(k),x=0,g={injectType:"lazyStyleTag",insert:"head",singleton:!1},D={};D.locals=b().locals||{},D.use=function(){return x++||(p=_()(b(),g)),D},D.unuse=function(){x>0&&!--x&&(p(),p=null)};const w=(0,n(1900).Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("PageBar"),e._v(" "),n("v-container",{attrs:{fluid:"",tag:"section"}},[n("v-row",{staticClass:"fill-height"},[n("v-col",{attrs:{dark:""}},[n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("\r\n                            "+e._s(e.$t("calendar.today"))+"\r\n                        ")]),e._v(" "),n("v-btn",{staticClass:"arrowButton",attrs:{fab:"",small:"",color:"purple darken-2"},on:{click:e.prev}},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("\r\n                                fa-chevron-left\r\n                            ")])],1),e._v(" "),n("v-btn",{staticClass:"arrowButton",attrs:{fab:"",small:"",color:"purple darken-2"},on:{click:e.next}},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("\r\n                                fa-chevron-right\r\n                            ")])],1),e._v(" "),n("v-spacer"),e._v(" "),e.$can("save","Menu")?n("v-dialog",{attrs:{width:"50%",height:"40%"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs2;return[n("v-btn",e._g(e._b({staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),a),[e._v(e._s(e.$t("menu.dish.delete")))])]}}],null,!1,3970280721),model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[e._v(" "),n("v-card",{staticClass:"txtarea"},[n("v-sheet",{staticClass:"area-title white--text",attrs:{color:"purple darken-2",shaped:"",elevation:"3"}},[e._v("\r\n                                    "+e._s(e.$t("menu.dish.delete"))+"\r\n                                ")]),e._v(" "),n("v-combobox",{attrs:{items:e.dishData.map((function(e){return e.name})),label:"Wybierz danie"},model:{value:e.combo2,callback:function(t){e.combo2=t},expression:"combo2"}}),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"purple darken-2",dark:""},on:{click:function(t){return e.delete_dish(e.combo2)}}},[e._v("\r\n                                        "+e._s(e.$t("menu.delete"))+"\r\n                                    ")])],1)],1)],1):e._e(),e._v(" "),e.$can("save","Menu")?n("v-dialog",{attrs:{width:"50%",height:"40%"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),a),[e._v(e._s(e.$t("menu.dish.add")))])]}}],null,!1,426071657),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",{staticClass:"txtarea"},[n("v-sheet",{staticClass:"area-title white--text",attrs:{color:"purple darken-2",shaped:"",elevation:"3"}},[e._v("\r\n                                    "+e._s(e.$t("menu.dish.add"))+"\r\n                                ")]),e._v(" "),n("v-combobox",{attrs:{items:e.items,label:"Wybierz rodzaj dania"},model:{value:e.combo,callback:function(t){e.combo=t},expression:"combo"}}),e._v(" "),n("v-text-field",{attrs:{label:"Dodaj nazwę dania"},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}}),e._v(" "),n("v-textarea",{attrs:{label:"Dodaj opis dania"},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}}),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"purple darken-2",dark:""},on:{click:function(t){return e.add_dish(e.combo,e.area,e.field)}}},[e._v("\r\n                                        "+e._s(e.$t("menu.add"))+"\r\n                                    ")])],1)],1)],1):e._e(),e._v(" "),e.$can("save","Menu")?n("v-dialog",{attrs:{width:"50%",height:"40%"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs3;return[n("v-btn",e._g(e._b({staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),a),[e._v(e._s(e.$t("menu.edit")))])]}}],null,!1,2543860204),model:{value:e.dialog3,callback:function(t){e.dialog3=t},expression:"dialog3"}},[e._v(" "),n("v-card",{staticClass:"txtarea"},[n("v-sheet",{staticClass:"area-title white--text",attrs:{color:"purple darken-2",shaped:"",elevation:"3"}},[e._v("\r\n                                    "+e._s(e.$t("menu.edit"))+"\r\n                                ")]),e._v(" "),n("v-row",[n("v-col",[n("v-date-picker",{attrs:{color:"purple darken-2",locale:"pl"},model:{value:e.picker,callback:function(t){e.picker=t},expression:"picker"}})],1),e._v(" "),n("v-col",[n("v-combobox",{attrs:{label:"Śniadanie",items:e.breakfests},model:{value:e.brk,callback:function(t){e.brk=t},expression:"brk"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-combobox",{attrs:{label:"Obiad",items:e.dinners},model:{value:e.din,callback:function(t){e.din=t},expression:"din"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-combobox",{attrs:{label:"Podwieczorek",items:e.lunches},model:{value:e.lch,callback:function(t){e.lch=t},expression:"lch"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"purple darken-2",dark:""},on:{click:function(t){return e.edit_menu(e.brk,e.din,e.lch,e.picker)}}},[e._v("\r\n                                        "+e._s(e.$t("menu.accept"))+"\r\n                                    ")])],1)],1)],1):e._e()],1)],1),e._v(" "),n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"purple darken-3",events:e.events,type:"week","event-height":60,"event-ripple":{center:!0},"event-color":"purple darken-3",locale:"pl","first-interval":"6","interval-count":"11"},on:{"click:event":e.showEvent},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),e._v(" "),n("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":"",rounded:""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("v-card",{attrs:{"min-width":"350px",flat:"",color:"purple darken-2"}},[n("v-toolbar",{attrs:{color:"purple darken-3"}},[n("v-toolbar-title",{staticClass:"white--text",domProps:{innerHTML:e._s(e.selectedEvent.name)}}),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-card-text",{attrs:{color:"white"}},[n("p",{staticClass:"white--text text-pre-line",domProps:{innerHTML:e._s(e.selectedEvent.details)}})])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"9534a070",null).exports},9070:(e,t,n)=>{var a=n(5944);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,n(5346).Z)("4d096105",a,!0,{})}}]);