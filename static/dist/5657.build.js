(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[5657],{3686:(t,e,a)=>{"use strict";a.d(e,{Z:()=>c});var r=a(6610),s=a(5991),n=a(5255),i=a(3724),o=a(7608),l=a(9578),u=a(507);var c=function(t){(0,n.Z)(c,t);var e,a,l=(e=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,o.Z)(e);if(a){var s=(0,o.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,i.Z)(this,t)});function c(){return(0,r.Z)(this,c),l.apply(this,arguments)}return(0,s.Z)(c,[{key:"baseURL",value:function(){return u.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),c}(l.H)},4726:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});const r={name:"UiInputTextValidation",props:{rules:{type:String,default:""},value:{type:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1!==["url","text","password","email","search"].indexOf(t)}}},data:function(){return{inputValue:""}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""},vPName:function(){return this.$attrs.vPName?this.$attrs.vPName:this.lowerCaseLabel}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}},s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationProvider",{attrs:{name:t.vPName,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("v-text-field",{attrs:{label:t.$attrs.label,"error-messages":r,disabled:t.disabled,type:t.type},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})]}}])})}),[],!1,null,null,null).exports},2935:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});const r={name:"UiSelectValidation",props:{rules:{type:String,default:""},items:{type:Array,default:""},value:{type:null},disabled:{type:Boolean,default:!1}},data:function(){return{selectValue:0}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""}},watch:{selectValue:function(t){this.$emit("input",t)},value:function(t){if("number"==typeof t){var e=this.getItem(t);if(e)return void(this.selectValue={id:e.id,name:e.name})}this.selectValue=t}},methods:{getItem:function(t){return this.items.find((function(e){return e.id===t}))}},created:function(){if("number"==typeof this.value){var t=this.getItem(this.value);if(t)return void(this.selectValue={id:t.id,name:t.name})}else this.value&&(this.selectValue=this.value)}},s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationProvider",{attrs:{name:t.lowerCaseLabel},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("v-select",{attrs:{hint:t.selectValue.name+", "+t.selectValue.id,items:t.items,"item-text":"name","item-value":"id",label:t.$attrs.label,"error-messages":r,disabled:t.disabled,"persistent-hint":"","return-object":""},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}})]}}])})}),[],!1,null,null,null).exports},5657:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var r=a(2137),s=a(7757),n=a.n(s),i=a(4726),o=a(2935),l=a(6610),u=a(5991),c=a(5255),f=a(3724),d=a(7608);var m=function(t){(0,c.Z)(s,t);var e,a,r=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,d.Z)(e);if(a){var s=(0,d.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,f.Z)(this,t)});function s(){return(0,l.Z)(this,s),r.apply(this,arguments)}return(0,u.Z)(s,[{key:"resource",value:function(){return"change_password"}}]),s}(a(3686).Z);const p={ititle:"profile.title",components:{UiInputTextValidation:i.Z,UiSelectValidation:o.Z},data:function(){return{formData:{firstname:"",surname:"",sex:{id:0,name:"Kobieta"}},formData2:{password:"",repeatPassword:""},loading:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.fetchProfile()}))},methods:{fetchProfile:function(){var t=this.$store.getters["auth/currentUser"];this.formData.firstname=t.firstname,this.formData.surname=t.surname},changePassword:function(){var t=this;return(0,r.Z)(n().mark((function e(){var a,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,t.loading=!0,e.prev=2,r=new m({password:a.formData2.password,repeat_password:a.formData2.repeatPassword}),e.next=6,r.save();case 6:"Password must be different from the current one"===e.sent.msg?a.$toast.error(a.$t("profile.passwordChange.error2"),a.$t("notifications.error")):a.$toast.success(a.$t("profile.passwordChange.success"),a.$t("notifications.success")),a.formData2.password="",a.formData2.repeatPassword="",a.$refs["nus-observer2"].reset(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.$toast.error(a.$t("profile.passwordChange.error"),a.$t("notifications.error"));case 16:return e.prev=16,a.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))()}}},v=(0,a(1900).Z)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageBar"),t._v(" "),a("v-container",{attrs:{fluid:"",tag:"section"}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",{staticClass:"mx-auto"},[a("ValidationObserver",{ref:"nus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return e.reset,[a("v-card-text",[a("p",{staticClass:"text--primary"},[a("v-icon",{staticClass:"mr-4",attrs:{color:"primary"}},[t._v("fa-user")]),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("profile.basicInfo"))+"\n\t\t\t\t\t\t\t\t")],1)]),t._v(" "),a("v-card-text",[a("div",{staticClass:"text--primary"},[a("form",[a("v-card",{staticClass:"mb-5 elevation-0"},[a("v-container",[a("v-row",[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("UiInputTextValidation",{attrs:{rules:"required|min:3|max:128",label:t.$t("forms.fields.user.firstname"),disabled:!0},model:{value:t.formData.firstname,callback:function(e){t.$set(t.formData,"firstname",e)},expression:"formData.firstname"}})],1),t._v(" "),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("UiInputTextValidation",{attrs:{rules:"required|min:3|max:128",label:t.$t("forms.fields.user.surname"),disabled:!0},model:{value:t.formData.surname,callback:function(e){t.$set(t.formData,"surname",e)},expression:"formData.surname"}})],1),t._v(" "),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("UiSelectValidation",{attrs:{rules:"required",label:t.$t("forms.fields.user.sex"),items:[{name:"Kobieta",id:0},{name:"Mężczyzna",id:1}],disabled:!0},model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}})],1)],1)],1)],1)],1)])]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),t.$can("save","Profile")?a("v-btn",{attrs:{text:"",disabled:!0},on:{click:function(e){return r(t.updateProfile)}}},[t._v(t._s(t.$t("profile.updateProfile")))]):t._e(),t._v(" "),a("v-spacer")],1)]}}])})],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",{staticClass:"mx-auto"},[a("ValidationObserver",{ref:"nus-observer2",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return e.reset,[a("v-card-text",[a("p",{staticClass:"text--primary"},[a("v-icon",{staticClass:"mr-4",attrs:{color:"primary"}},[t._v("fa-key")]),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("profile.passwordChange.info"))+"\n\t\t\t\t\t\t\t\t")],1)]),t._v(" "),a("v-card-text",[a("div",{staticClass:"text--primary"},[a("form",[a("v-card",{staticClass:"mb-5 elevation-0"},[a("v-container",[a("v-row",[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("UiInputTextValidation",{attrs:{rules:"required|min:3|max:40",label:t.$t("forms.fields.user.password"),vPName:"password"},model:{value:t.formData2.password,callback:function(e){t.$set(t.formData2,"password",e)},expression:"formData2.password"}})],1),t._v(" "),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("UiInputTextValidation",{attrs:{rules:"required|min:3|max:40|confirmed:password",label:t.$t("forms.fields.user.repeatPassword")},model:{value:t.formData2.repeatPassword,callback:function(e){t.$set(t.formData2,"repeatPassword",e)},expression:"formData2.repeatPassword"}})],1)],1)],1)],1)],1)])]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"primary",attrs:{text:"",disabled:t.loading},on:{click:function(e){return r(t.changePassword)}}},[t._v(t._s(t.$t("profile.changePassword")))]),t._v(" "),a("v-spacer")],1)]}}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);