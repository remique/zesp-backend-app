(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[3865],{6:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var a=n(6610),r=n(5991),o=n(5255),s=n(3724),i=n(7608);var l=function(t){(0,o.Z)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,i.Z)(e);if(n){var r=(0,i.Z)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.Z)(this,t)});function u(){return(0,a.Z)(this,u),l.apply(this,arguments)}return(0,r.Z)(u,[{key:"resource",value:function(){return"group"}}]),u}(n(3686).Z)},3686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var a=n(6610),r=n(5991),o=n(5255),s=n(3724),i=n(7608),l=n(9578),u=n(507);var c=function(t){(0,o.Z)(c,t);var e,n,l=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,i.Z)(e);if(n){var r=(0,i.Z)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.Z)(this,t)});function c(){return(0,a.Z)(this,c),l.apply(this,arguments)}return(0,r.Z)(c,[{key:"baseURL",value:function(){return u.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),c}(l.H)},4726:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"UiInputTextValidation",props:{rules:{type:String,default:""},value:{type:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1!==["url","text","password","email","search"].indexOf(t)}}},data:function(){return{inputValue:""}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""},vPName:function(){return this.$attrs.vPName?this.$attrs.vPName:this.lowerCaseLabel}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}},r=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{name:t.vPName,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("v-text-field",{attrs:{label:t.$attrs.label,"error-messages":a,disabled:t.disabled,type:t.type},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})]}}])})}),[],!1,null,null,null).exports},1113:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=(0,n(1900).Z)({name:"ConfirmModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),n("v-spacer")],2)],1)],1)],1)}),[],!1,null,null,null).exports},8958:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=(0,n(1900).Z)({name:"FormModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),n("v-card-text",[n("form",[n("v-card",{staticClass:"mb-5 elevation-0"},[n("v-container",[n("v-row",[t._t("body")],2)],1)],1)],1)]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),n("v-spacer")],2)],1)],1)}),[],!1,null,null,null).exports},2561:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"UIPagination",props:{length:{type:Number,default:15},totalVisible:{type:Number,default:7},value:{type:null}},data:function(){return{currentPage:1}},watch:{currentPage:function(t){this.$emit("input",t)},value:function(t){this.currentPage=t}},created:function(){this.value&&(this.currentPage=this.value)}},r=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.length,"total-visible":t.totalVisible},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)}),[],!1,null,null,null).exports},3865:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var a=n(2137),r=n(7757),o=n.n(r),s=n(4726),i=n(2561),l=n(1113),u=n(8958),c=n(6);const d={ititle:"groups.list.title",components:{UiInputTextValidation:s.Z,UIPagination:i.Z,ConfirmModal:l.Z,FormModal:u.Z},data:function(){return{pageId:1,allPages:0,dialogAdd:!1,dialogEdit:!1,dialogDelete:!1,headers:[{text:this.$t("forms.fields.group.id"),align:"start",value:"id"},{text:this.$t("forms.fields.group.name"),value:"name"},{text:this.$t("general.actions"),value:"actions",sortable:!1}],data:[],editedIndex:-1,newItem:{id:0,name:""},editedItem:{id:0,name:""},defaultItem:{id:0,name:""},loading:!0}},computed:{groupName:{get:function(){if(this.editedIndex>=0){var t=this.data[this.editedIndex];if(t)return t.name}return""},set:function(t){return t}}},mounted:function(){var t=this;this.$nextTick((function(){t.pageId=parseInt(t.$route.params.pageId),t.fetchGroupsData()}))},methods:{fetchGroupsData:function(){var t=arguments,e=this;return(0,a.Z)(o().mark((function n(){var a,r,s,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:null,r=e,e.loading=!0,n.prev=3,a&&a(),n.next=7,c.Z.page(r.pageId).get();case 7:s=n.sent,i=s.data,r.allPages=r.getAllPagesFromLast(s.last_page),i&&(r.data=i),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),r.$toast.error(r.$t("groups.list.error"),r.$t("notifications.error"));case 16:return n.prev=16,r.loading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[3,13,16,19]])})))()},saveGroupData:function(t){var e=arguments,n=this;return(0,a.Z)(o().mark((function a(){var r,s,i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,s=n,a.prev=2,i=new c.Z(t),a.next=6,i.save();case 6:a.sent,s.$toast.success(s.$t("groups.add.success"),s.$t("notifications.success")),s.fetchGroupsData(r),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),s.$toast.error(s.$t("groups.add.error"),s.$t("notifications.error"));case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},editGroupData:function(t){var e=arguments,n=this;return(0,a.Z)(o().mark((function a(){var r,s,i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,s=n,a.prev=2,i=new c.Z(t),a.next=6,i.save();case 6:s.$toast.success(s.$t("groups.edit.success"),s.$t("notifications.success")),s.fetchGroupsData(r),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),s.$toast.error(s.$t("groups.edit.error"),s.$t("notifications.error"));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},deleteGroupData:function(t){var e=arguments,n=this;return(0,a.Z)(o().mark((function a(){var r,s,i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:null,s=n,a.prev=2,i=new c.Z({id:t}),a.next=6,i.delete();case 6:s.$toast.success(s.$t("groups.delete.success"),s.$t("notifications.success")),s.fetchGroupsData(r),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),s.$toast.error(s.$t("groups.delete.error"),s.$t("notifications.error"));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},openAddGroupDialog:function(){this.dialogAdd=!0,this.newItem=this._.cloneDeep(this.defaultItem),this.$refs["nus-observer"].reset()},addGroupConfirm:function(){var t=this;this.saveGroupData({name:this.newItem.name},(function(){t.closeGroupAddDialog()}))},closeGroupAddDialog:function(){this.dialogAdd=!1},openEditGroupDialog:function(t){this.editedItem=this._.cloneDeep(this.defaultItem),this.$refs["eus-observer"].reset(),this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogEdit=!0},editGroupConfirm:function(){this.editGroupData({id:this.editedItem.id,name:this.editedItem.name},(function(){})),this.closeGroupEditDialog()},closeGroupEditDialog:function(){this.dialogEdit=!1},openDeleteGroupDialog:function(t){this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogDelete=!0},deleteGroupConfirm:function(){var t=this.data[this.editedIndex];this.deleteGroupData(t.id),this.closeGroupDeleteDialog()},closeGroupDeleteDialog:function(){this.dialogDelete=!1}},watch:{pageId:function(t){this.fetchGroupsData()}}},f=(0,n(1900).Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PageBar",[t.$can("save","Groups")?n("v-btn",{staticClass:"primary",attrs:{elevation:"1",large:"",rounded:"",loading:t.loading},on:{click:t.openAddGroupDialog}},[n("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("fas fa-plus")]),t._v("\n\t\t\t"+t._s(t.$t("groups.add.title"))+"\n\t\t")],1):t._e()],1),t._v(" "),n("v-container",{attrs:{fluid:"",tag:"section"}},[n("v-row",[n("v-col",{attrs:{cols:"12",lg:"12"}},[n("v-card",{staticClass:"mx-auto"},[n("v-card-text",[n("div",{staticClass:"text--primary"},[[n("v-data-table",{attrs:{headers:t.headers,items:t.data,"disable-pagination":!0,"footer-props":{disablePagination:!0,disableItemsPerPage:!0},"hide-default-footer":!0,"loading-text":"",loading:t.loading},scopedSlots:t._u([{key:"item.actions",fn:function(e){var a=e.item;return[n("router-link",{attrs:{to:{name:"GroupUsers",params:{groupId:a.id,pageId:1}}}},[t.$can("read","Groups")?n("v-icon",{attrs:{small:"",disabled:t.loading}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tfas fa-search-plus\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()],1),t._v(" "),t.$can("save","Groups")?n("v-icon",{attrs:{small:"",disabled:t.loading},on:{click:function(e){return t.openEditGroupDialog(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tfas fa-edit\n\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.$can("delete","Groups")?n("v-icon",{attrs:{small:"",disabled:t.loading},on:{click:function(e){return t.openDeleteGroupDialog(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tfas fa-trash\n\t\t\t\t\t\t\t\t\t\t")]):t._e()]}},{key:"no-data",fn:function(){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.$t("data.noResults"))+"\n\t\t\t\t\t\t\t\t\t")]},proxy:!0}])},[[n("v-progress-linear",{staticClass:"ma-0",attrs:{slot:"progress",color:"blue",indeterminate:"",height:"4"},slot:"progress"})]],2)]],2)])],1),t._v(" "),n("UIPagination",{staticClass:"mt-4",attrs:{length:t.allPages},model:{value:t.pageId,callback:function(e){t.pageId=e},expression:"pageId"}})],1)],1)],1),t._v(" "),n("ValidationObserver",{ref:"nus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return e.reset,[n("FormModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("groups.add.title")))]},proxy:!0},{key:"body",fn:function(){return[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:50",label:t.$t("forms.fields.group.name")},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"},on:{click:function(e){return a(t.addGroupConfirm)}}},[t._v(t._s(t.$t("buttons.actions.add")))])]},proxy:!0}],null,!0),model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}})]}}])}),t._v(" "),n("ValidationObserver",{ref:"eus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return e.reset,[n("FormModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("groups.edit.title"))+" "+t._s(t.groupName))]},proxy:!0},{key:"body",fn:function(){return[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:50",label:t.$t("forms.fields.group.name")},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"},on:{click:function(e){return a(t.editGroupConfirm)}}},[t._v(t._s(t.$t("buttons.actions.edit")))])]},proxy:!0}],null,!0),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}})]}}])}),t._v(" "),n("ConfirmModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("groups.delete.confTitle"))+" "+t._s(t.groupName)+"?")]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteGroupConfirm}},[t._v(t._s(t.$t("buttons.actions.accept")))])]},proxy:!0}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}})],1)}),[],!1,null,null,null).exports}}]);